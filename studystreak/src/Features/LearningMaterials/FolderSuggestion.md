Folder Structure Suggestions
To keep things organized and distinguish AI-related content:

Frontend (studystreak > src):

Create a new folder: src > Features > LearningMaterials > StudyTools.
This will hold all AI tool components (e.g., StudyToolsPage.tsx, SummaryTab.tsx, QuizTab.tsx, etc.).
Why? It separates AI features from general material management, making the codebase modular. For example:

Copy code
studystreak/
├── src/
│   ├── Features/
│   │   ├── LearningMaterials/
│   │   │   ├── StudyTools/
│   │   │   │   ├── StudyToolsPage.tsx  // Main page component
│   │   │   │   ├── SummaryTab.tsx
│   │   │   │   ├── KeyPointsTab.tsx
│   │   │   │   ├── QuizTab.tsx
│   │   │   │   ├── FlashcardsTab.tsx
│   │   │   │   └── index.ts  // Exports for easy importing
│   │   │   └── [other material components]
│   └── [existing folders like components, pages]
Backend:

For PHP: Use existing controllers in php-backend (e.g., LearningMaterialController.php) to handle fetching AI data (summaries, key points stored as JSON in learning_materials table). Add new endpoints if needed (e.g., for quiz generation).
For Python (if we shift AI logic there): Use the ai-service folder. Create a subfolder like ai-service > study_tools for scripts (e.g., generate_quiz.py). Call from PHP via API bridge.
This structure keeps AI logic contained—start with PHP for simplicity, then migrate to Python as needed.

Mockup for the "Study Tools" Page
When users click the "Study Tools" button (only visible if AI is enabled), navigate to /materials/{id}/study-tools. Here's a text-based mockup with iOS-style elements (inspired by Apple's clean, card-based UI with rounded corners, subtle shadows, and whitespace). Imagine this as a full-page layout in React/Tailwind.

Overall Page Layout (iOS-Style):

Header: Fixed top bar with back button ("< Back to Material"), title ("Study Tools"), and a small "AI Generated" badge (subtle icon with tooltip: "Content generated by AI—editable for improvements").
Tabs: iOS-style segmented control (horizontal tabs at the top, like iOS Safari tabs) for "Summary," "Key Points," "Quizzes," "Flashcards." Active tab highlighted with a blue underline or fill (Apple's accent color).
Content Area: Card-based sections with rounded corners (border-radius: 12px), light shadows (box-shadow: 0 2px 8px rgba(0,0,0,0.1)), and plenty of padding. Background: Soft white/gray gradient for iOS feel.
Footer: Optional progress bar or "Save Edits" button if we add editing later.
Tab Breakdown:

Summary Tab:

Card: Title "Document Summary" with "AI Generated" label.
Content: Concise text overview (e.g., "This document covers heart anatomy..."). Editable textarea if we add that feature.
iOS Touch: Smooth fade-in animation on load.
Key Points Tab:

Card: Title "Key Points" with bullet list (e.g., • Heart structure • Blood flow).
Content: Bullet points, scrollable if long.
iOS Touch: Tap to expand/collapse for mobile.
Quizzes Tab:

Card: Dropdowns for "Quiz Type" (multiple-choice, true/false, short answer) and "Difficulty" (easy, normal, hard).
Button: "Generate Quiz" → Loads a quiz interface (questions with options, submit button).
iOS Touch: Segmented controls for selections, like iOS pickers.
Flashcards Tab:

Card: List of Q&A pairs (e.g., front: "What is the heart?" back: "A muscle that pumps blood").
Controls: Auto-flip toggle (on/off), timer slider (5-30 seconds).
iOS Touch: Swipe gestures for flipping (using React touch libraries), card animations.
Visual Style (Tailwind Classes for iOS Feel):

Use bg-gray-50 for background, rounded-xl for cards, shadow-sm for subtle depth.
Colors: Apple-inspired (blues for accents, grays for neutrals).
Responsiveness: Stack tabs vertically on mobile, like iOS apps.
This mockup is functional and Apple-like—simple, intuitive, and premium.

Implementation for Visibility and Disable Rules
Visibility Rule: "Study Tools" button only shows if ai_toggle_enabled = true (check via API fetch in the material list component).
In studystreak > src > Features > LearningMaterials > [MaterialList].tsx: Conditionally render the button based on the fetched data.
Disable Rule: Once ai_toggle_enabled = true, hide/disable the AI toggle in upload/edit forms. In backend, block toggling off.
Frontend: In upload form, check ai_toggle_enabled and disable the checkbox with tooltip.
Backend: In php-backend > controllers > MaterialController.php, in the toggle endpoint, add: if ($material['ai_toggle_enabled']) { return error("Cannot disable AI once enabled."); }



##### IMPORTANT #########
Advice on Using 'LearningMaterialsController.php' for AI Features
Yes, you can technically use the existing LearningMaterialsController.php for the new AI-related endpoints (e.g., fetching summaries, key points, quizzes, and flashcards for the "Study Tools" page), especially since it's already handling material-related logic. However, with it being around 2000 lines, I strongly recommend against just adding more code to it without refactoring. Large controllers like this can become unwieldy, leading to maintenance issues, bugs, and difficulty for collaboration. Instead, let's prioritize clean, modular code to make future development (e.g., AI integration) easier.

Recommended Approach: Create a New Controller for AI Features
Why a New One? AI features (study tools) are a distinct module—separate from basic CRUD operations on materials. This keeps the codebase organized, follows PHP best practices (e.g., single responsibility principle), and makes testing/debugging simpler. Your existing controller can stay focused on uploads, toggles, and basic material management.
How to Structure It:
Create a new file: php-backend > controllers > StudyToolsController.php (or AiFeaturesController.php for clarity).
Move or add AI-specific methods here, such as:
getSummary($materialId): Fetch and return the summary from the learning_materials table (stored as JSON).
getKeyPoints($materialId): Return key points.
generateQuiz($materialId, $type, $difficulty): Handle quiz generation (call Python if needed).
getFlashcards($materialId): Return flashcards.
Keep shared logic (e.g., authentication checks) in a base controller or helper.
Integration: Update your routes (e.g., in routes/api.php or similar) to point to the new controller. For example:

Copy code
Route::get('/materials/{id}/study-tools/summary', [StudyToolsController::class, 'getSummary']);
Refactoring the Existing Controller: Over time, consider splitting LearningMaterialsController.php into smaller ones (e.g., MaterialUploadController.php, MaterialVisibilityController.php). This reduces its size and improves readability.
If You Must Use the Existing One (Not Recommended)
If time is tight or refactoring feels overwhelming, add the methods to LearningMaterialsController.php. But limit additions to avoid bloating it further—aim to keep new code under 200 lines.
Pros: Quick and dirty; no new files.
Cons: Increases complexity; harder to maintain. Use comments to separate AI logic.
Implementation Tips
Database Handling: Store AI data in learning_materials as JSON fields (e.g., summary_json, keypoints_json). For quizzes/flashcards, use separate tables if they get complex (e.g., material_quizzes linked by material_id).
Calling Python: From the new controller, use an API call to ai-service for generation (e.g., via Guzzle HTTP client).
Testing: Test endpoints with Postman to ensure they return data correctly.